<!-- Waline -->
{{- if .Site.Params.waline.enable -}}
<script src="https://cdn.jsdelivr.net/npm/@waline/client@{{ .Site.Params.waline.version }}/dist/Waline.min.js"></script>
<div class="pagination__title">
    <span class="pagination__title-h"
        ><span class="vcount"></span>精彩评论</span
    >
    <hr />
</div>
<div id="waline"></div>
<script>
    var locale = {
        admin: "Ṽerified", // 博主标识
        busy: "操作频繁，请稍候再试...",
        cancel: "取消",
        cancelReply: "取消回复",
        comments: "评论",
        confirm: "确认",
        continue: "继续",
        days: "天前",
        emoji: "表情",
        expand: "查看更多...",
        hours: "小时前",
        link: "网址",
        login: "登录",
        logout: "退出",
        mail: "邮箱",
        mailFail: "请填写正确的邮件地址",
        minutes: "分钟前",
        more: "加载更多...",
        nick: "昵称",
        nickFail: "昵称不能少于 3 个字符",
        now: "刚刚",
        placeholder:
            "·支持 匿名评论\n·支持 Markdown\n·支持 Twimoji\n·支持 代码块语法高亮\n·不收集 UserAgent", // 评论框提示语
        preview: "预览",
        reply: "回复",
        seconds: "秒前",
        sofa: "来发评论吧～",
        submit: "提交",
        uploadDone: "传输完成！",
        uploading: "正在传输...",
        word: "字",
        wordHint: "评论字数应在 $0 到 $1 字之间！\n当前字数：$2",
        "code-98": "Waline 初始化失败，请检查 av-min.js 版本",
        "code-99": "Waline 初始化失败，请检查 init 中的`el`元素.",
        "code-100": "Waline 初始化失败，请检查你的 AppId 和 AppKey.",
        "code-140": "今日 API 调用总次数已超过开发版限制.",
        "code-401": "未经授权的操作，请检查你的 AppId 和 AppKey.",
        "code-403": "访问被 API 域名白名单拒绝，请检查你的安全域名设置.",
    };
    new Waline({
        el: "#waline", // 初始化 Waline 挂载器
        avatarCDN: "https://sdn.geekzu.org/avatar/", // 设置 Gravatar 头像 CDN 地址
        copyright: true, // Waline 版权信息
        dark: "auto", // 适配暗黑模式
        highlight: true, // 代码高亮
        locale, // 自定义语言 i18n，请在上面 locale 中修改内容
        requiredMeta: ["nick", "mail"], // 必填项
        serverURL: "https://john-grnp65uze-johnsblog.vercel.app", // Waline 的服务端地址，末尾勿加 “/”
        visitor: true, // 开启访问量统计
        wordLimit: 0, // 评论字数限制，0 为无限制
    });
</script>
{{- end }}

<!-- Twikoo -->
{{- if .Site.Params.twikoo.enable -}}
<div class="pagination__title">
    <span class="pagination__title-h">精彩评论</span>
    <hr />
</div>
<div id="tcomment"></div>
<script src="https://cdn.jsdelivr.net/npm/twikoo@{{ .Site.Params.twikoo.version }}/dist/twikoo.all.min.js"></script>
<!-- <script>window.TWIKOO_MAGIC_PATH="共用评论区的名称"</script> -->
<script>
    twikoo.init({
        envId: "eallion-8gkunp4re49bae66",
        el: "#tcomment",
        path: 'window.TWIKOO_MAGIC_PATH||window.location.pathname',
        onCommentLoaded: function () {
            $(".tk-content img:not(.tk-avatar-img)").each(function () {
                var _b = $("<a></a>").attr("href", this.src);
                $(this).wrap(_b);
            })
            $(".tk-content a[rel!=link]:has(img)").slimbox();
        }
    });
</script>
{{- end }}

<!-- DisqusJS -->
{{- if .Site.Params.disqus.enable -}}
<div id="disqus_thread"></div>
{{- if .Site.Params.disqus.proxy -}}
<script src="https://cdn.jsdelivr.net/npm/disqusjs@{{ .Site.Params.disqus.version }}/dist/disqus.js"></script>
<script>
    var dsqjs = new DisqusJS({
        shortname: "eallion",
        siteName: "{{ .Site.Params.title }}",
        identifier:
            '{{ if .Params.identifier }}{{ trim .Params.identifier "/" }}{{ else }}{{ trim .RelPermalink "/" }}{{ end }}',
        url: '{{ if .Params.identifier }}"{{ trim .Site.BaseURL "/" }}{{ .Params.identifier }}"{{ else }}{{ .Permalink }}{{ end }}',
        title: "{{ .Title }}",
        api: "https://disqus.skk.moe/disqus/",
        apikey: "fF9m3DwDSmNQ2g5DIpuWElDaQTx1ofpMSSW8JeKaB2loVBExeInmMbaEGeLs7lOL",
        admin: "eallion",
        adminLabel: "",
        nocomment: "",
    });
</script>
{{- else -}} {{- $script := printf `
<script defer src="https://%s.disqus.com/embed.js"></script>
` .Site.Params.comment.disqus.shortname -}} {{- end -}}
<noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
{{- end -}}

<!-- Utterances -->
{{- if .Site.Params.utterances.enable -}}
<script
    src="https://utteranc.es/client.js"
    repo="eallion/blog"
    issueterm="url"
    label="Comments"
    theme="github-light"
    crossorigin="anonymous"
    async
></script>
{{- end -}}

